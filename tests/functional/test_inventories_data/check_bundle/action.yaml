---
- hosts: CLUSTER
  gather_facts: no

  tasks:
    - debug:
        msg: "CLUSTER group"
    - debug:
        msg: "{{ cluster.config }}"
    - debug:
        msg: "{{ services.service_1.component_1.config }}"
    - debug:
        msg: "{{ services.service_1.component_2.config }}"
    - debug:
        msg: "{{ services.service_2.component_1.config }}"
    - debug:
        msg: "{{ services.service_2.component_2.config }}"
  tags:
    - always

- hosts: service_1
  gather_facts: no

  tasks:
    - debug:
       msg: "service_1 group"
    - debug:
        msg: "{{ cluster.config }}"
    - debug:
        msg: "{{ services.service_1.component_1.config }}"
    - debug:
        msg: "{{ services.service_1.component_2.config }}"
    - debug:
        msg: "{{ services.service_2.component_1.config }}"
    - debug:
        msg: "{{ services.service_2.component_2.config }}"
  tags:
    - always


- hosts: service_1.component_1
  gather_facts: no

  tasks:
    - debug:
       msg: "service_1.component_1 group"
    - debug:
        msg: "{{ cluster.config }}"
    - debug:
        msg: "{{ services.service_1.component_1.config }}"
    - debug:
        msg: "{{ services.service_1.component_2.config }}"
    - debug:
        msg: "{{ services.service_2.component_1.config }}"
    - debug:
        msg: "{{ services.service_2.component_2.config }}"
  tags:
    - always


- hosts: service_1.component_2
  gather_facts: no

  tasks:
    - debug:
       msg: "service_1.component_2 group"
    - debug:
        msg: "{{ cluster.config }}"
    - debug:
        msg: "{{ services.service_1.component_1.config }}"
    - debug:
        msg: "{{ services.service_1.component_2.config }}"
    - debug:
        msg: "{{ services.service_2.component_1.config }}"
    - debug:
        msg: "{{ services.service_2.component_2.config }}"
  tags:
    - always


- hosts: service_2
  gather_facts: no

  tasks:
    - debug:
       msg: "service_2 group"
    - debug:
        msg: "{{ cluster.config }}"
    - debug:
        msg: "{{ services.service_1.component_1.config }}"
    - debug:
        msg: "{{ services.service_1.component_2.config }}"
    - debug:
        msg: "{{ services.service_2.component_1.config }}"
    - debug:
        msg: "{{ services.service_2.component_2.config }}"
  tags:
    - always


- hosts: service_2.component_2
  gather_facts: no

  tasks:
    - debug:
       msg: "service_2.component_2 group"
    - debug:
        msg: "{{ cluster.config }}"
    - debug:
        msg: "{{ services.service_1.component_1.config }}"
    - debug:
        msg: "{{ services.service_1.component_2.config }}"
    - debug:
        msg: "{{ services.service_2.component_1.config }}"
    - debug:
        msg: "{{ services.service_2.component_2.config }}"
  tags:
    - always


- hosts: service_2.component_2
  gather_facts: no

  tasks:
    - debug:
       msg: "service_2.component_2 group"
    - debug:
        msg: "{{ cluster.config }}"
    - debug:
        msg: "{{ services.service_1.component_1.config }}"
    - debug:
        msg: "{{ services.service_1.component_2.config }}"
    - debug:
        msg: "{{ services.service_2.component_1.config }}"
    - debug:
        msg: "{{ services.service_2.component_2.config }}"
  tags:
    - always